!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.cytoscapeEdgeConnections=n():e.cytoscapeEdgeConnections=n()}(window,(function(){return function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=0)}([function(e,n){function o(e){e("core","edgeConnections",t)}function t(e){return new r(this,e)}function r(e,n={}){const o=n.maxPasses||10;function t(n){if(r(n,"source")&&r(n,"target"))return function(n){const o=n.midpoint(),t=e.add({classes:"aux-node",position:s(o)&&o,data:{edgeId:n.id(),color:n.style("line-color")}}).lock();n.scratch("edgeConnections",{auxNodeId:t.id()}),d(n)}(e.add(n)),!0}function r(n,o){const t=n.data[o],r=e.getElementById(t.toString());return!r.empty()&&(r.isEdge()&&(n.data[o]=function(e){const n=a(e);if(!n)throw console.error('Edge has no "auxNodeId" info',e),Error(`edge ${e.id()} has no "auxNodeId" info`);return n}(r)),!0)}function d(e){e.parallelEdges().forEach(i)}function i(e){const n=c(e);if(n){const o=e.midpoint();s(o)&&n.unlock().position(o).lock()}}function c(n){if(!n||!n.isEdge())throw console.error("Invalid auxNode() argument (edge expected):",n),Error("invalid auxNode() argument");const o=a(n);if(!o)return;const t=e.getElementById(o);if(t.empty())throw console.error("Data inconsistency: aux node of edge",n,"not in graph, auxNodeId",o),Error(`data inconsistency: aux node of edge ${n.id()} not in graph`);return t}function a(e){const n=e.scratch("edgeConnections");return n&&n.auxNodeId}function u(e){if(!e||!e.isNode())throw console.error("Invalid edgeId() argument (node expected):",e),Error("invalid edgeId() argument");return e.data("edgeId")}function s(e){return!(isNaN(e.x)||isNaN(e.y))}this.addEdge=function(e){t(e)||console.warn(`Edge ${e.data.id} not added as source/target not in graph`,e)},this.addEdges=function(e){let n=0;do{if(e=e.filter(e=>!t(e)),++n===o){console.warn(e.length+" edges not added to graph due to missing source/target node (giving up after "+o+" add-edges passes)",e);break}}while(e.length)},this.auxNode=c,this.isAuxNode=function(e){return void 0!==u(e)},this.edgeId=u,this.edge=function(n){const o=u(n);if(!o)throw console.error("Invalid edge() argument (aux node expected):",n),Error("invalid edge() argument");const t=e.getElementById(o);if(!t.empty())return t},e.style().selector("node.aux-node").style({"background-color":"data(color)"}),e.on("position","node",e=>{e.target.connectedEdges().forEach(i)}),e.on("remove","edge",e=>{const n=e.target;!function(e){const n=c(e);n&&n.remove()}(n),d(n)}),e.on("style","edge",e=>function(e){const n=c(e);n&&n.data("color",e.style("line-color"))}(e.target))}e.exports=o,"undefined"!=typeof cytoscape&&o(cytoscape)}])}));